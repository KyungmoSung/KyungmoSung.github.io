---
layout: post
title:  "[iOS] Fastlaneì„ ì ìš©í•˜ì—¬ ë°°í¬ ìë™í™”í•˜ê¸°"
author: Sung Kyungmo
catalog: true
tags: [ios, fastlane]
comments: true
---
# Fastlane

Appì„ ë¹Œë“œí•˜ê³  ì•±ìŠ¤í† ì–´ì— ì—…ë¡œë“œí•˜ê³  ì‹¬ì‚¬ì œì¶œ, í…ŒìŠ¤íŠ¸ë¹Œë“œ ì—…ë¡œë“œ, í…ŒìŠ¤í„° ì´ˆëŒ€ ë“± ë²ˆê±°ë¡­ê³  ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ë“¤ì„ Fastlaneì„ í†µí•´ì„œ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Fastlane ì„¤ì¹˜ë¶€í„° ì„¤ì • ë°°í¬ê¹Œì§€ í•œë²ˆ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

# fastlane ì„¤ì¹˜

Fastlaneì€ ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì„¤ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°€ì´ë“œì—ì„œ ì¶”ì²œí•˜ëŠ” Bundlerë¡œ ì„¤ì¹˜í•´ë³´ê² ìŠµë‹ˆë‹¤
>macOSì˜ ì‹œìŠ¤í…œ Rubyë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ ì¢…ì†ì„±ì„ ê´€ë¦¬í•˜ê¸° ì–´ë µê³  ì¶©ëŒì„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ê¶Œì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### Bundler

*Bundler*ì™€ Gemfileì„ ì‚¬ìš©í•˜ì—¬ íŒ¨ìŠ¤íŠ¸ë ˆì¸ì— ëŒ€í•œ ì˜ì¡´ì„±ì„ ì •ì˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. Fastlane ë²„ì „ê³¼ ê·¸ ì¢…ì†ì„±ì„ ëª…í™•í•˜ê²Œ ì •ì˜í• ìˆ˜ìˆê³ , ì‹¤í–‰ ì†ë„ë„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- í„°ë¯¸ë„ì—ì„œÂ `gem install bundler` ì»¤ë§¨ë“œë¥¼ ì…ë ¥í•˜ì—¬ Bundlerë¥¼ ì„¤ì¹˜
- í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ `bundle init` ì‹¤í–‰ í›„ Â `./Gemfile`Â íŒŒì¼ì— ì•„ë˜ ë‚´ìš©ì„ ì…ë ¥

```
source "https://rubygems.org"

gem "fastlane"
```

- `bundle update`Â ë¥¼ ì‹¤í–‰í•˜ê³ Â `./Gemfile`Â ,Â `./Gemfile.lock`Â íŒŒì¼ì„ ë²„ì „ê´€ë¦¬ì— ì¶”ê°€
- *fastlane*ì„ ì‹¤í–‰í• ë•ŒëŠ”Â `bundle exec fastlane [lane]`
- CIì˜ ì²«ë²ˆì§¸ ë¹Œë“œ ë‹¨ê³„ë¡œ `bundle install`Â ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”
- *fastlaneì„* ì—…ë°ì´íŠ¸ í•˜ë ¤ë©´, Â `bundle update fastlane`

### fastlane ì„¤ì •

í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™ í›„ ì´ˆê¸°ì„¤ì • `fastlane init`

```swift
[10:01:12]: -----------------------------
[10:01:12]: --- Welcome to fastlane ğŸš€ ---
[10:01:12]: -----------------------------
[10:01:12]: fastlane can help you with all kinds of automation for your mobile app
[10:01:12]: We recommend automating one task first, and then gradually automating more over time
[10:01:12]: What would you like to use fastlane for?
1. ğŸ“¸  Automate screenshots
2. ğŸ‘©â€âœˆï¸  Automate beta distribution to TestFlight
3. ğŸš€  Automate App Store distribution
4. ğŸ›   Manual setup - manually setup your project to automate your tasks
?
```

ì‚¬ìš© ëª©ì ì„ ì„ íƒí•˜ë©´ ë˜ëŠ”ë° ì•± ë°°í¬ë¥¼ ìœ„í•´ì„œëŠ” 3ë²ˆì„ ì„ íƒí•˜ë©´ ë©ë‹ˆë‹¤.

ì´ˆê¸° ì„¸íŒ…ì„ ìœ„í•œê²ƒìœ¼ë¡œ ë‚˜ì¤‘ì— ì„¤ì •ì„ í†µí•´ì„œ í•„ìš”í•œê²ƒì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
[10:07:02]: --------------------------------
[10:07:02]: --- Login with your Apple ID ---
[10:07:02]: --------------------------------
[10:07:02]: To use App Store Connect and Apple Developer Portal features as part of fastlane,
[10:07:02]: we will ask you for your Apple ID username and password
[10:07:02]: This is necessary for certain fastlane features, for example:
[10:07:02]: 
[10:07:02]: - Create and manage your provisioning profiles on the Developer Portal
[10:07:02]: - Upload and manage TestFlight and App Store builds on App Store Connect
[10:07:02]: - Manage your App Store Connect app metadata and screenshots
[10:07:02]: 
[10:07:02]: Your Apple ID credentials will only be stored in your Keychain, on your local machine
[10:07:02]: For more information, check out
[10:07:02]: 	https://github.com/fastlane/fastlane/tree/master/credentials_manager
[10:07:02]: 
[10:07:02]: Please enter your Apple ID developer credentials
[10:07:02]: Apple ID Username:
```

ë¡œê·¸ì¸ì„ ìœ„í•´ ì• í”Œ ê³„ì •ê³¼ ë¹„ë°€ë²ˆí˜¸, ì´ì¤‘ì¸ì¦ ë²ˆí˜¸ê¹Œì§€ ì…ë ¥!

```swift
Multiple App Store Connect teams found, please enter the number of the team you want to use: 
1) "AAA" (1234)
2) "BBB" (5678)
2
Multiple teams found on the Developer Portal, please enter the number of the team you want to use: 
1) 123ASD "AAA" (Company/Organization)
2) ASD123 "BBB" (Company/Organization)
2
```

ë§Œì•½ ì†Œì†ë˜ì–´ ìˆëŠ” íŒ€ì´ ì—¬ëŸ¬ê°œë¼ë©´ ìœ„ì™€ê°™ì´ íŒ€ ì„ íƒ í™”ë©´ì´ ëœ¬ë‹¤. ì›í•˜ëŠ”ê²ƒ ì„ íƒ~

ì´ë ‡ê²Œ í•˜ë©´ fastlane ê¸°ë³¸ ì„¤ì •ì´ ì™„ë£Œë©ë‹ˆë‹¤.

í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ í™•ì¸í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ í´ë”,íŒŒì¼ë“¤ì´ ìƒì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤.

```swift
fastlane
	metadata    -> ì•±ìŠ¤í† ì–´ ë©”íƒ€ë°ì´í„° ì •ë³´ë“¤ì´ ë‹´ê¸´ í´ë”
	screenshots -> ì•±ìŠ¤í† ì–´ ìŠ¤í¬ë¦°ìƒ·ì´ ë‹´ê¸´ í´ë”
	Appfile     -> ë²ˆë“¤ID, ì• í”ŒID, íŒ€ID ë“±ì˜ ì •ë³´ê°€ ë‹´ê¸´ íŒŒì¼
	Deliverfile -> ì•±ìŠ¤í† ì–´ ë©”íƒ€ë°ì´í„° ì €ì¥ì„ ìœ„í•œ íŒŒì¼
	Fastfile    -> ìë™í™”í•  ëª…ë ¹ì–´ë“¤ì´ ë‹´ê¸´ íŒŒì¼
Gemfile
Gemfile.lock
```

ì²˜ìŒ fastlane ì´ˆê¸°í™”ì‹œ ë©”íƒ€ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ì§€ë§Œ ìˆ˜ë™ìœ¼ë¡œ ë°›ì•„ì˜¤ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥

ì•±ìŠ¤í† ì–´ ìŠ¤í¬ë¦°ìƒ· ë‹¤ìš´ë¡œë“œ: `fastlane deliver download_screenshots`

ì•±ìŠ¤í† ì–´ ë©”íƒ€ë°ì´í„° ë‹¤ìš´ë¡œë“œ: `fastlane deliver download_metadata`

# Testflight ë°°í¬

Fastfileì„ ìˆ˜ì •í•´ Testflightì— ì—…ë¡œë“œ í•´ë³´ê² ìŠµë‹ˆë‹¤

```swift
desc "Push a new beta build to TestFlight"
  lane :beta do
    increment_build_number(xcodeproj: "Greencar.xcodeproj")
    build_app(workspace: "Greencar.xcworkspace", scheme: "Greencar")
    upload_to_testflight
    slack(
      message: "Testflight ë°°í¬ ì™„ë£Œ",
      slack_url: "ìŠ¬ë™ URL"
    )
  end
```

- increment_build_number: ìë™ìœ¼ë¡œ ë¹Œë“œë„˜ë²„ë¥¼ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.
- build_app: ì•±ì„ ë¹Œë“œí•©ë‹ˆë‹¤. ë¹Œë“œí•  ì›Œí¬ìŠ¤í˜ì´ìŠ¤, ìŠ¤í‚¤ë§ˆë¥¼ ì§€ì •í•´ì¤ë‹ˆë‹¤
- upload_to_testflight: Testflightì— ì—…ë¡œë“œí•©ë‹ˆë‹¤
- slack: ì—…ë¡œë“œê°€ ì™„ë£Œë˜ë©´ Slackì±„ë„ì— ë°°í¬ì™„ë£Œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤

íŒŒì¼ì„ ì €ì¥í•˜ê³  `fastlane beta` ëª…ë ¹ì–´ë¡œ ë°°í¬ì‘ì—…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

ìë™ìœ¼ë¡œ ë¹Œë“œë¥¼ ì§„í–‰í•˜ê³  Testflightì— ë°°í¬ê°€ ë˜ì–´ì•¼í•˜ëŠ”ë° ì—ëŸ¬ë©”ì‹œì§€ê°€ ëœ¨ë„¤ìš”..

```swift
[11:03:26]: Transporter transfer failed.
[11:03:26]: 
[11:03:26]: Please sign in with an app-specific password. You can create one at appleid.apple.com. (-22910)
[11:03:26]: 
[11:03:26]: Your account has 2 step verification enabled
[11:03:26]: Please go to https://appleid.apple.com/account/manage
[11:03:26]: and generate an application specific password for
[11:03:26]: the iTunes Transporter, which is used to upload builds
[11:03:26]: 
[11:03:26]: To set the application specific password on a CI machine using
[11:03:26]: an environment variable, you can set the
[11:03:26]: FASTLANE_APPLE_APPLICATION_SPECIFIC_PASSWORD variable
-------------------------------------------------------------------------------------
Please provide your Apple Developer Program account credentials
The login information you enter will be stored in your macOS Keychain
-------------------------------------------------------------------------------------
Password (application-specific for kmsung0617@gmail.com):
```

app-specific passwordê°€ í•„ìš”í•˜ë‹¤ê³  ë‚˜ì˜¤ë„¤ìš”. ì•± ì•”í˜¸ë¥¼ ì„¤ì •í•˜ë ¤ë©´ 

>[https://appleid.apple.com/account/manage](https://appleid.apple.com/account/manage) â†’ ë¡œê·¸ì¸ ë° ë³´ì•ˆ â†’ ì•± ì•”í˜¸


ì•±ì•”í˜¸ ìƒì„±í›„ ì—…ë¡œë“œê°€ ì™„ë£Œë ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì¤ë‹ˆë‹¤. 

ê¸°ë‹¤ë¦¬ëŠ”ê²Œ ì‹«ë‹¤ë©´ `skip_waiting_for_build_processing` ì˜µì…˜ì„ ì¶”ê°€í•´ì£¼ë©´ ë©ë‹ˆë‹¤.

```swift
[12:57:57]: Successfully finished processing the build 8.2.1 - 101 for IOS
[12:57:57]: Using App Store Connect's default for notifying external testers (which is true) - set `notify_external_testers` for full control
[12:57:57]: Distributing new build to testers: 8.2.1 - 101
[12:57:57]: Successfully distributed build to Internal testers ğŸš€
[12:57:57]: -------------------
[12:57:57]: --- Step: slack ---
[12:57:57]: -------------------
[12:57:58]: Successfully sent Slack notification

+------+------------------------+-------------+
|              fastlane summary               |
+------+------------------------+-------------+
| Step | Action                 | Time (in s) |
+------+------------------------+-------------+
| 1    | default_platform       | 0           |
| 2    | increment_build_number | 1           |
| 3    | build_app              | 463         |
| 4    | upload_to_testflight   | 1892        |
| 5    | slack                  | 1           |
+------+------------------------+-------------+

[12:57:58]: fastlane.tools just saved you 40 minutes! ğŸ‰
```

ì—…ë¡œë“œê°€ ì™„ë£Œë˜ë©´ ìœ„ì™€ê°™ì´ ìŠ¤í…ë³„ ì†Œìš”ì‹œê°„ê³¼ ì´ ì†Œìš”ì‹œê°„ì´ ì¶œë ¥ë©ë‹ˆë‹¤. ì €ëŠ ì´ 40ë¶„ì´ ê±¸ë ¸ë„¤ìš”..

ìŠ¬ë™ì—ë„ ì•Œë¦¼ì „ì†¡ì´ ì„±ê³µí–ˆë‹¤ê³  ë‚˜ì˜¤ë‹ˆ ìŠ¬ë™ì— ë“¤ì–´ê°€ì„œ ë°°í¬ì™„ë£Œ ë©”ì‹œì§€ê°€ ì™”ëŠ”ì§€ í™•ì¸í•´ ë´…ì‹œë‹¤.

![Untitled](/img/fastlane/Untitled.png)

App Store Connectì—ë„ ë¹Œë“œê°€ ì •ìƒì ìœ¼ë¡œ ì—…ë¡œë“œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!

![Untitled](/img/fastlane/Untitled_1.png)

# App Store ë°°í¬

Fastfileì„ ìˆ˜ì •í•´ Testflightì— ì—…ë¡œë“œ í•´ë³´ê² ìŠµë‹ˆë‹¤

```swift
desc "Push a new release build to the App Store"
  lane :release do
    increment_build_number(xcodeproj: "Greencar.xcodeproj")
    build_app(workspace: "Greencar.xcworkspace", scheme: "Greencar")
    upload_to_app_store(
      force: true,
      skip_screenshots: true,
			skip_metadata: false,
      submit_for_review: true,
      automatic_release: false,
    )
    slack(
      message: "App Store ë°°í¬ ì™„ë£Œ",
      slack_url: "ìŠ¬ë™ URL"
    )
  end
```

- increment_build_number: ìë™ìœ¼ë¡œ ë¹Œë“œë„˜ë²„ë¥¼ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.
- build_app: ì•±ì„ ë¹Œë“œí•©ë‹ˆë‹¤. ë¹Œë“œí•  ì›Œí¬ìŠ¤í˜ì´ìŠ¤, ìŠ¤í‚¤ë§ˆë¥¼ ì§€ì •í•´ì¤ë‹ˆë‹¤
- upload_to_app_store: ì•±ìŠ¤í† ì–´ì— ì—…ë¡œë“œí•©ë‹ˆë‹¤.
    - force: HTML reportë¥¼ ìŠ¤í‚µí•©ë‹ˆë‹¤.
    - skip_screenshots: ìŠ¤í¬ë¦°ìƒ· ì—…ë¡œë“œë¥¼ ìŠ¤í‚µí•©ë‹ˆë‹¤. ê¸°ì¡´ì— ì•±ìŠ¤í† ì–´ì— ì˜¬ë¼ê°€ìˆëŠ” ìŠ¤í¬ë¦°ìƒ·ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— trueë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
    - skip_metadata: ì•±ìŠ¤í† ì–´ ë©”íƒ€ë°ì´í„°ë¥¼ ìŠ¤í‚µí•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ë²„ì „ì—ëŒ€í•œ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸ í•˜ê¸° ìœ„í•´ì„œ falseë¡œ ì„¤ì •í•©ë‹ˆë‹¤. (/fastlane/metadata í´ë”ì—ì„œ ì •ë³´ ìˆ˜ì •)
    - submit_for_review: ì—…ë¡œë“œê°€ ì™„ë£Œë˜ë©´ ìë™ìœ¼ë¡œ ì‹¬ì‚¬ê¹Œì§€ ì œì¶œí•©ë‹ˆë‹¤.
    - automatic_release: ì‹¬ì‚¬ê°€ ì™„ë£Œë˜ë©´ ìë™ìœ¼ë¡œ ë°°í¬í• ì§€ ìˆ˜ë™ìœ¼ë¡œ ë°°í¬í• ì§€ ì„ íƒí•©ë‹ˆë‹¤.
- slack: ì—…ë¡œë“œê°€ ì™„ë£Œë˜ë©´ Slackì±„ë„ì— ë°°í¬ì™„ë£Œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤


>ìì„¸í•œ ë©”íƒ€ë°ì´í„°ëŠ” ë§í¬ë¥¼ í™•ì¸í•˜ì„¸ìš” [https://docs.fastlane.tools/actions/upload_to_app_store/](https://docs.fastlane.tools/actions/upload_to_app_store/)


íŒŒì¼ì„ ì €ì¥í•˜ê³  `fastlane release` ëª…ë ¹ì–´ë¡œ ë°°í¬ì‘ì—…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

```swift
[14:46:42]: Use of Advertising Identifier (IDFA) is required to submit
Add information to the :submission_information option...
  Docs: http://docs.fastlane.tools/actions/deliver/#compliance-and-idfa-settings
  Example: submission_information: { add_id_info_uses_idfa: false }
  Example: submission_information: {
    add_id_info_uses_idfa: true,
    add_id_info_serves_ads: false,
    add_id_info_tracks_install: true,
    add_id_info_tracks_action: true,
    add_id_info_limits_tracking: true
  }
  Example CLI:
    --submission_information "{\"add_id_info_uses_idfa\": false}"
```

ë¹Œë“œê°€ ì™„ë£Œë˜ê³  ì•±ìŠ¤í† ì–´ì— ì—…ë¡œë“œ í•˜ëŠ” ê³¼ì •ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤..

ì•±ì—ì„œ **IDFA**ë¥¼ ì‚¬ìš©í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— ì¶”ê°€ì ì¸ ì •ë³´ë¥¼ ì¶”ê°€í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤

```swift
 upload_to_app_store(
			...
      submission_information: {
        add_id_info_serves_ads: false,
        add_id_info_tracks_action: true,
        add_id_info_tracks_install: true,
        add_id_info_uses_idfa: true
      }
    )
```

- submission_information: ê´‘ê³ ì‹ë³„ì(IDFA), ì•”í˜¸í™”, ì½˜í…ì¸  ê¶Œí•œì„ ì„¤ì •í•©ë‹ˆë‹¤
    - add_id_info_serves_ads: ê´‘ê³  ì œê³µ ì—¬ë¶€
    - add_id_info_tracks_action: íŠ¹ì • í–‰ìœ„ ì¶”ì 
    - add_id_info_tracks_install: ì„¤ì¹˜ ì¶”ì 
    - add_id_info_uses_idfa: IDFA ì‚¬ìš© ì—¬ë¶€
    

Fastfileì„ ìˆ˜ì •í•˜ê³  ë‹¤ì‹œ ë°°í¬ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤

```swift
[16:37:31]: Successfully finished processing the build 8.2.1 - 104 for IOS
[16:37:31]: Selecting build 8.2.1 (104)...
[16:37:32]: Successfully selected build
[16:37:34]: Successfully updated IDFA declarations on App Store Connect
[16:37:36]: Successfully submitted the app for review!
[16:37:36]: -------------------
[16:37:36]: --- Step: slack ---
[16:37:36]: -------------------
[16:37:37]: Successfully sent Slack notification

+------+------------------------+-------------+
|              fastlane summary               |
+------+------------------------+-------------+
| Step | Action                 | Time (in s) |
+------+------------------------+-------------+
| 1    | default_platform       | 0           |
| 2    | increment_build_number | 1           |
| 3    | build_app              | 492         |
| 4    | upload_to_app_store    | 1465        |
| 5    | slack                  | 0           |
+------+------------------------+-------------+

[16:37:37]: fastlane.tools just saved you 33 minutes! ğŸ‰
seong-gyeongmo-iMac:ios-greencar front-artist$
```

![Untitled](/img/fastlane/Untitled_2.png)

ì—…ë¡œë“œê°€ ì™„ë£Œë˜ê³  ìë™ìœ¼ë¡œ ì‹¬ì‚¬ì œì¶œê¹Œì§€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!

# Firebase App Distribution ë°°í¬

Firebaseì— ì•±ì„ ë°°í¬í•˜ê¸° ìœ„í•´ì„œëŠ” í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.

`fastlane add_plugin firebase_app_distribution`

ê·¸ í›„ Firebase ì¸ì¦ì´ í•„ìš”í•œë° ì¸ì¦ë°©ë²•ì€ 3ê°€ì§€ì…ë‹ˆë‹¤.

1. í”ŒëŸ¬ê·¸ì¸ì˜ ë¡œê·¸ì¸ ì‘ì—…ì„ í†µí•´ Google ê³„ì •ì— ë¡œê·¸ì¸
2. Firebase ì„œë¹„ìŠ¤ ê³„ì • ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ì‚¬ìš©
3. Firebase CLIë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸

ì €ëŠ” ê°„ë‹¨í•œ 1ë²ˆ ë°©ë²•ì„ ì‚¬ìš©í•˜ê² ìŠµë‹ˆë‹¤. ìš°ì„  ë¡œê·¸ì¸ì„ ìœ„í•´ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•´ì¤ë‹ˆë‹¤.

`fastlane run firebase_app_distribution_login`

```swift
[14:30:00]: ---------------------------------------------
[14:30:00]: --- Step: firebase_app_distribution_login ---
[14:30:00]: ---------------------------------------------
[14:30:00]: Open the following address in your browser and sign in with your Google account:
[14:30:00]: https://accounts.google.com/o/oauth2/auth?access_type=offline&approval_prompt=force&client_id=563584335869-fgrhgmd47bqnekij5i8b5pr03ho849e6.apps.googleusercontent.com&include_granted_scopes=true&redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=code&scope=https://www.googleapis.com/auth/cloud-platform
[14:30:00]: 
[14:30:00]: Enter the resulting code here:
```

í„°ë¯¸ë„ì„ í™•ì¸í•´ë³´ë©´ ë§¨ í•˜ë‹¨ì— ë§í¬ê°€ í•˜ë‚˜ ì¶œë ¥ë©ë‹ˆë‹¤. ì € ë§í¬ë¥¼ ì—´ì–´ì¤€ í›„ êµ¬ê¸€ê³„ì • ë¡œê·¸ì¸ì„ í•˜ê³  ê¶Œí•œì„ í—ˆìš©í•´ì£¼ë©´ ì½”ë“œê°€ ë°œê¸‰ë©ë‹ˆë‹¤. ê·¸ ì½”ë“œë¥¼ ë‹¤ì‹œ í„°ë¯¸ë„ì— ì…ë ¥í•´ì¤ë‹ˆë‹¤.

ì½”ë“œë¥¼ ì…ë ¥í•˜ë©´ Refresh Tokenì´ ë°œê¸‰ë©ë‹ˆë‹¤. ë°œê¸‰ë°›ì€ í† í°ì€  Fastfile `firebase_cli_token` ì— ë„£ì–´ì¤ë‹ˆë‹¤. ì •ë¦¬í•˜ë©´

>ë§í¬ì´ë™ â†’ ë¡œê·¸ì¸ â†’ ì½”ë“œë°œê¸‰ â†’ í„°ë¯¸ë„ì— ì½”ë“œì…ë ¥ â†’ í† í°ë°œê¸‰ â†’ Fastfileì— í† í°ì…ë ¥

ì´ì œ Fastfileì„ ìˆ˜ì •í•´ Firebase App Distributionì— ì—…ë¡œë“œ í•´ë³´ê² ìŠµë‹ˆë‹¤

```swift
desc "Push a new beta build to Firebase App Distribution"
  lane :firebase do
    build_app(workspace: "Greencar.xcworkspace", scheme: "Greencar")
    firebase_app_distribution(
				firebase_cli_token: "ë°œê¸‰ë°›ì€ Refresh Token",
        release_notes: "ë°°í¬ìë™í™” í…ŒìŠ¤íŠ¸",
        testers: "kmsung0617@gmail.com",
        groups: "app_ios"
    )
    slack(
      message: "Firebase App Distribution ë°°í¬ ì™„ë£Œ",
      slack_url: "ìŠ¬ë™ URL"
    )
  end
```

- build_app: ì•±ì„ ë¹Œë“œí•©ë‹ˆë‹¤. ë¹Œë“œí•  ì›Œí¬ìŠ¤í˜ì´ìŠ¤, ìŠ¤í‚¤ë§ˆë¥¼ ì§€ì •í•´ì¤ë‹ˆë‹¤
- firebase_app_distribution: Firebase ì—…ë¡œë“œí•©ë‹ˆë‹¤.
    - release_notes: ì¶œì‹œ ë…¸íŠ¸ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
    - testers: ì´ˆëŒ€í•  í…ŒìŠ¤í„° ì´ë©”ì¼ì„ ì…ë ¥í•©ë‹ˆë‹¤
    - groups: ì´ˆëŒ€í•  í…ŒìŠ¤í„° ê·¸ë£¹ì„ ì…ë ¥í•©ë‹ˆë‹¤.
- slack: ì—…ë¡œë“œê°€ ì™„ë£Œë˜ë©´ Slackì±„ë„ì— ë°°í¬ì™„ë£Œ ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤

íŒŒì¼ì„ ì €ì¥í•˜ê³  `fastlane firebase` ëª…ë ¹ì–´ë¡œ ë°°í¬ì‘ì—…ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.

```swift
[15:22:44]: Successfully exported and compressed dSYM file
[15:22:44]: Successfully exported and signed the ipa file:
[15:22:44]: /Users/front-artist/Desktop/Data/Git/greencar-ios/ios-greencar/Greencar.ipa
[15:22:44]: ---------------------------------------
[15:22:44]: --- Step: firebase_app_distribution ---
[15:22:44]: ---------------------------------------
[15:22:44]: Authenticating with --firebase_cli_token parameter
[15:22:45]: ğŸ” Authenticated successfully.
[15:22:45]: âŒ› Uploading the IPA.
[15:26:44]: âœ… Uploaded IPA successfully and created release 8.2.1 (104).
[15:26:45]: âœ… Posted release notes.
[15:26:47]: âœ… Added testers/groups.
[15:26:47]: ğŸ‰ App Distribution upload finished successfully.
[15:26:47]: -------------------
[15:26:47]: --- Step: slack ---
[15:26:47]: -------------------
[15:26:48]: Successfully sent Slack notification

+------+---------------------------+-------------+
|                fastlane summary                |
+------+---------------------------+-------------+
| Step | Action                    | Time (in s) |
+------+---------------------------+-------------+
| 1    | default_platform          | 0           |
| 2    | build_app                 | 479         |
| 3    | firebase_app_distribution | 242         |
| 4    | slack                     | 0           |
+------+---------------------------+-------------+

[15:26:48]: fastlane.tools just saved you 12 minutes! ğŸ‰
```

![Untitled](/img/fastlane/Untitled_3.png)

ë°°í¬ê°€ ì™„ë£Œëœ í›„ Firebase App Distributionì„ í™•ì¸í•´ë³´ë‹ˆ ì •ìƒì ìœ¼ë¡œ ë¹Œë“œê°€ ì—…ë¡œë“œ ë˜ì–´ìˆìŠµë‹ˆë‹¤.




## Reference
--- 
[fastlane - App automation done right](https://fastlane.tools)